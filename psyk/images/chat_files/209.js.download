(window.odspNextWebpackJsonp=window.odspNextWebpackJsonp||[]).push([[209],{2660:function(e,t,n){"use strict";n.d(t,"t",function(){return u});var a=n(0),i=n(116),r=n(9),o=n(2265),s=n(446),c=n(1468),d=n(8),l=function(e){function t(t,n){void 0===n&&(n={});var a=e.call(this,t,n)||this;return a._getModule=t.getModule,a._path=t.path,a._getExecutorParams=t.getExecutorParams,d.e.isActivated("9DB5106C-820A-4714-B0C1-1005523DFE8F","07/09/2021","Removes usage of BundeLoader from ExecutorAction to solve race conditions in BundleQueue")&&(a._bundleLoader=a.resources.consume(s.e),a._bundleLoader.queueLoad(a._path,a._getModule).done()),a}return Object(a.__extends)(t,e),t.prototype.execute=function(e,t){var n=this;return this._path?this._loadExecutorType().then(function(a){return"function"!=typeof a?i.n.wrapError(new Error("Cannot create action from ".concat(a,": ").concat(n._path))):i.n.as(n._getExecutorParams()).then(function(r){var o=new(n.resources.injected(a))(r);return i.n.as(o.execute(e,t))})}):i.n.wrapError(new Error("Cannot create action from nothing: ".concat(this._path)))},t.prototype._loadExecutorType=function(){if(d.e.isActivated("9DB5106C-820A-4714-B0C1-1005523DFE8F","07/09/2021","Removes usage of BundeLoader from ExecutorAction to solve race conditions in BundleQueue")){var e=this._bundleLoader.loadNow(this._path,this._getModule);return this._loadExecutorType=function(){return e},e}return this._getModule().then(function(e){return Object(c.e)(e)})},t.dependencies=Object(a.__assign)({},o.n.dependencies),t}(o.n);t.e=l;var u=new r.t({name:"ExecutorLoader",factory:{dependencies:l.dependencies,create:function(e){return{instance:function(t){function n(n){return t.call(this,n,e)||this}return Object(a.__extends)(n,t),n}(l)}}}})},2944:function(e,t,n){"use strict";n.d(t,"e",function(){return d});var a=n(0),i=n("knockout-lib"),r=function(e){function t(t){var n=e.call(this,t)||this;return n.memoryContent=i.observable(null),n.serverContent=i.observable(null),n.outDated=i.observable(!1),n.isEditable=i.observable(!1),n.hasConflict=n.createPureComputed(n._computeHasConflict),n.hasPendingSave=n.createPureComputed(n._computeHasPendingSave),n.hasChanges=n.createPureComputed(n._computeHasChanges),n._lastSaved=i.observable(null),n._pendingSave=i.observable(null),n}return Object(a.__extends)(t,e),t.prototype.startingSave=function(){this.hasPendingSave.peek()||this._pendingSave(this.memoryContent.peek().text)},t.prototype.saveFailed=function(){this.hasPendingSave.peek()&&this._pendingSave(null)},t.prototype.saveSucceded=function(){this.hasPendingSave.peek()&&(this.updateETag=!0,this._lastSaved(this._pendingSave.peek()),this._pendingSave(null))},t.prototype._computeHasPendingSave=function(){return!!this._pendingSave()},t.prototype._computeHasChanges=function(){var e=this.memoryContent();if(!e||"string"!=typeof e.text)return!1;var t=this._lastSaved();return null===t?(this._lastSaved(e.text),!1):e.text!==t},t.prototype._computeHasConflict=function(){return!!this.serverContent()},t}(n(2265).n),o=n(711),s=n(125),c=function(){function e(e,t){this._itemContents={}}return e.prototype.getItemContent=function(e){var t=e.key,n=this._itemContents,a=n[t];return a||(a=new r,Object(o.e)(a,function(){delete n[t]}),n[t]=a),a},e.prototype.dispose=function(){this._itemContents={}},e}(),d=Object(s.r)("ItemContentProvider",c,{})},4707:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(116),r=n(2280),o=n(2660),s=n(2289),c=n(355),d=n(2944),l=n(3),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.getExecutorPath=function(){return"./SaveExecutor"},t.prototype.getModuleFactory=function(){return function(){return i.n.resolve(n.e(210).then(n.bind(null,5627)))}},t}(function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;n.name="Save",n._itemContentsProvider=n.resources.consume(d.e),n._selectionHelper=new(n.child(s.e))({overrideItem:t.item,allowMultiSelect:!1,canFallback:!1});var a=Object(l.Ho)(l.Y)?n._selectionHelper.currentItem:n.resources.consume(c.r);return n._loader=new(n.managed(o.e))({path:n.getExecutorPath(),getModule:n.getModuleFactory(),getExecutorParams:function(){return{selectionHelper:n._selectionHelper,currentItem:a.peek()}}}),n}return Object(a.__extends)(t,e),t.prototype.onIsAvailable=function(){var e=this._selectionHelper.firstItem();if(!e)return!1;var t=this._itemContentsProvider.getItemContent(e);return!!t.isEditable()&&!!t.memoryContent()&&!t.hasConflict()&&!t.hasPendingSave()&&t.hasChanges()},t.prototype.onExecute=function(e){return this._loader.execute(e)},t}(r.e));t.default=u}}]);