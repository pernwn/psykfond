(window.odspNextWebpackJsonp=window.odspNextWebpackJsonp||[]).push([[192],{2276:function(e,t,n){"use strict";n.d(t,"t",function(){return u});var a=n(0),i=n(2265),r=n(9),o=n(125),s={Small:"sm",Medium:"md",Large:"lg",XLarge:"xlg",XXLarge:"xxlg",XXXLarge:"xxxlg",XXXXLarge:"xxxxlg"},c={Small:480,Medium:640,Large:1024,XLarge:1366,XXLarge:1920,XXXLarge:2560,XXXXLarge:1/0},d=new r.t({name:"".concat("ResponsiveUI",".breakpoints"),factory:new r.e(c)}),l=function(e){function t(t,n){var a=e.call(this,t,n)||this;a._containerElement=t.containerElement||window;var i=a.observables;return a._breakpoints=i.wrap(n.breakpoints),a.events.on(a._containerElement,"resize, orientationchange",a._onContainerResize),a.windowWidth=i.create(0),a.windowHeight=i.create(0),a.formFactorSize=i.pureCompute(a._computeFormFactorSize),a.isHamburgerVisible=i.pureCompute(a._computeIsHamburgerVisible),a.showLabels=i.pureCompute(a._computeShowLabels),a.cssClass=i.pureCompute(a._computeCssClass),a._onContainerResize(),a}return Object(a.__extends)(t,e),t.reduceBreakpoints=function(e,t){return{Small:t,Medium:e.Small,Large:e.Medium,XLarge:e.Large,XXLarge:e.XLarge,XXXLarge:e.XXLarge,XXXXLarge:1/0}},t.determineWindowSize=function(e,t){if(void 0===t&&(t=c),0===e)return"Medium";for(var n in c)if(e<t[n])return n},t.determineCssClass=function(e){return s[e]},t.getScrollbarWidth=function(){var e=document.createElement("div"),t=e.style;t.visibility="hidden",t.width="100px",t.msOverflowStyle="scrollbar",document.body.appendChild(e);var n=e.offsetWidth;t.overflow="scroll";var a=document.createElement("div");a.style.width="100%",e.appendChild(a);var i=a.offsetWidth;e.parentNode.removeChild(e);var r=n-i;return this.getScrollbarWidth=function(){return r},r},t.prototype.compareSize=function(e,t){var n=this._breakpoints();return n[e]-n[t]},t.prototype._onContainerResize=function(e){var t=this._containerElement,n=document.body,a=document.documentElement,i=t.clientWidth||a.clientWidth||t.innerWidth||n.clientWidth,r=t.clientHeight||a.clientHeight||t.innerHeight||n.clientHeight;this.windowWidth(i),this.windowHeight(r)},t.prototype._computeFormFactorSize=function(){var e=this._breakpoints(),n=this.windowWidth();return this._containerElement===window?t.determineWindowSize(n,e):"Medium"},t.prototype._computeCssClass=function(){return t.determineCssClass(this.formFactorSize())},t.prototype._computeShowLabels=function(){return this.compareSize(this.formFactorSize(),"Medium")>0},t.prototype._computeIsHamburgerVisible=function(){return this.windowWidth()<c.Large},t.dependencies={breakpoints:d},t.DEFAULT_BREAKPOINTS=c,t.MAC_SCROLL_BAR_WIDTH=8,t}(i.n);t.e=l;var u=Object(o.r)("ResponsiveUI",l)},4672:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(2514),r=n(2289),o=n(2288),s=n(116),c=n(129),d=n(41),l=n(2311),u=n(117);Object(u.n)([{rawString:".od-MalwareDetected-dialog-header{color:"},{theme:"errorText",defaultValue:"#a4262c"},{rawString:";font-size:21px;margin-bottom:15px}"}]);var f=n(2267),p=n(19),m=n(3680),_='<a href="https://go.microsoft.com/fwlink/?linkid=862871" target="_blank">'.concat(m.a,"</a>"),h=function(e){function t(t){var n=e.call(this,t)||this;return n.allowInfectedDownload=t.allowInfectedDownload,n.malwareDetectedIconUrl=window.require.toUrl("odsp-media/images/atp/malware_icon_168x168.svg"),n.malwareDetectedMessageHeader=m.t,n.malwareDetectedMessage=p.format(m.n,_),n.malwareDetectedAllowDownloadMessage=p.format(m.e,_),n}return Object(a.__extends)(t,e),t}(f.e),b=n(2268).e({tagName:"od-malwareDetected",template:'<div class="od-MalwareDetected-dialog-content"><div class="od-MalwareDetected-dialog-header" data-bind="text:malwareDetectedMessageHeader"></div><div>\x3c!--ko if:allowInfectedDownload--\x3e<span data-bind="html:malwareDetectedAllowDownloadMessage"></span>\x3c!--/ko--\x3e\x3c!--ko ifnot:allowInfectedDownload--\x3e<span data-bind="html:malwareDetectedMessage"></span>\x3c!--/ko--\x3e</div></div>',viewModel:h}),g=n(478),v=n(2276),y=n(51),S=n(121),D=function(e){function t(t){var n=e.call(this,t)||this;return n.name="malwareDetected",n.dialogProvider=n.resources.consume(l.e),n._itemSelectionHelper=new(n.child(r.e))({overrideItem:t.item}),n._responsiveUI=n.resources.consume(v.t),n._pageContext=n.resources.consume(y.p),n._navigation=n.resources.consume(S.e),n._itemUrlHelper=n.resources.consume(g.s),n}return Object(a.__extends)(t,e),t.prototype.onIsAvailable=function(){var e=this._itemSelectionHelper.firstItem();return e&&e.lifeCycleStatus&&e.lifeCycleStatus.isMalwareDetected},t.prototype.onExecute=function(e,t){return this._getMalwareDetectedDialog(),s.n.wrap({resultType:d.t.Failure})},t.prototype._getMalwareDetectedDialog=function(){var e=this,t=this._pageContext.allowInfectedDownload,n=[];t&&n.push({name:c.Download,execute:function(){return e._downloadInfectedItemViaClassic(),s.n.wrap(2)},isAvailable:this.observables.create(!0),icon:new o.e("Download"),isDefault:!0}),n.push({name:t?c.declineInfectedDownload:c.ok,execute:function(){return s.n.wrap(2)},isAvailable:this.observables.create(!0),icon:new o.e("Cancel"),isDefault:!0}),this.dialogProvider.requestDialog({component:{name:b.tagName,params:{allowInfectedDownload:t}},size:"Medium",actions:n,focusOnPrimaryAction:!0,isDismissable:!(this._responsiveUI.compareSize(this._responsiveUI.formFactorSize(),"Small")<=0)})},t.prototype._getItemClassicDownloadLink=function(){var e=this._itemSelectionHelper.firstItem();return this._itemUrlHelper.getItemUrlParts(e.key).fullItemUrl+"?avcmd=1"},t.prototype._downloadInfectedItemViaClassic=function(){var e=this._getItemClassicDownloadLink();e&&this._navigation.navigateTo({url:e,frameId:"_blank"})},t}(i.e);t.default=D}}]);